<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>보도자료 | Global News24</title>
  <meta name="theme-color" content="#0b0f19" />
  <link rel="stylesheet" href="../../assets/css/style.css" />
</head>
<body>
  <div class="top-mini">
    <div class="wrap mini-row">
      <div class="mini-left">
        <a class="pill" href="../../">← 홈</a>
        <span class="badge">PRESS</span>
        <span class="muted">Update <strong id="today"></strong></span>
      </div>
      <div class="mini-right">
        <a href="../newsroom/">뉴스룸</a><span class="dot">•</span>
        <a href="../manual/">운영메뉴얼</a><span class="dot">•</span>
        <a href="../contact/">문의</a>
      </div>
    </div>
  </div>

  <main class="wrap main">
    <div class="page-head">
      <div>
        <h1>보도자료</h1>
        <div class="muted">공식 발표/공고/행사/모집/인증 안내</div>
      </div>
      <a class="btn" href="https://forms.gle/PUT_YOUR_REPORTER_FORM" target="_blank" rel="noopener">기자 송출</a>
    </div>

    <section class="card">
      <div class="section-head">
        <div class="section-title"><span class="bar"></span><h2>목록</h2></div>
      </div>
      <div id="list" class="list"></div>
    </section>
  </main>

  <button id="toTop" class="to-top" type="button" aria-label="Top">Top</button>

  <script src="../../assets/js/app.js"></script>
  <script src="../../assets/js/popularity.js"></script>
  <script>
    (async ()=>{
      const list = document.querySelector('#list');
      try{
        const press = await GN24.fetchJSON('../../data/press.json');
        press.sort((a,b)=>(b.date||'').localeCompare(a.date||''));
        list.innerHTML = press.map(x=>{
          const url = `../article/?id=${encodeURIComponent(x.id)}`;
          return `
            <a class="item" href="${url}" data-id="${GN24.escape(x.id)}" data-title="${GN24.escape(x.title)}" data-cat="보도자료">
              <div class="thumb" style="background-image:url('${x.image || ''}')"></div>
              <div>
                <h4>${GN24.escape(x.title)}</h4>
                <div class="meta">
                  <span>보도자료</span>
                  <span>${GN24.escape(GN24.formatDate(x.date)||'')}</span>
                  <span>${GN24.escape(x.author ? `기자 ${x.author}` : '편집부')}</span>
                </div>
                <div class="sum">${GN24.escape(x.summary||'')}</div>
              </div>
            </a>
          `;
        }).join('') || `<div class="muted">보도자료가 없습니다.</div>`;

        list.addEventListener('click',(e)=>{
          const a = e.target.closest('a[data-id]');
          if(!a) return;
          GN24.popularity?.bump(a.dataset.id, a.dataset.title, '보도자료');
        }, {once:true});
      }catch(e){
        console.error(e);
        list.innerHTML = `<div class="muted">data/press.json 로딩 실패</div>`;
      }
    })();
  </script>
</body>
</html>
